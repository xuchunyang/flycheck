# Use Python 3.5 for our tooling
language: python
python:
  - "3.5"
# Emacs fails to build using the latest Trusty image on Travis
# See https://github.com/travis-ci/travis-ci/issues/9061
# and https://github.com/moby/moby/issues/22801
sudo: required
dist: trusty

services:
  - docker

before_install:
  - docker build -t flycheck-tests docker-test

install:
  - docker run -v $TRAVIS_BUILD_DIR:/root/flycheck -w /root/flycheck flycheck-tests /bin/bash -c "make init"

script:
  - docker run -v $TRAVIS_BUILD_DIR:/root/flycheck -w /root/flycheck flycheck-tests /bin/bash -c "make integ"

notifications:
  webhooks:
    urls:
      - https://webhooks.gitter.im/e/efdc5fd9433efa7c6b80
    on_success: change
